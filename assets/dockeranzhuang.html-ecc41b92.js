import{_ as o,r as t,o as i,c as d,e,f as a,b as s,d as n}from"./app-e09b6429.js";const c="/orangewind/images/docker/dockerInstall.png",l="/orangewind/images/docker/dockerError.png",p="/orangewind/images/docker/dockerInstallSuccess.png",h="/orangewind/images/docker/dockerWSLSuccess.png",g="/orangewind/images/docker/dockerUpdate.png",u="/orangewind/images/docker/dockerApk.png",k="/orangewind/images/docker/dockerVersion.png",m="/orangewind/images/docker/dockerImageLs.png",_="/orangewind/images/docker/dockerSetting.png",b="/orangewind/images/docker/dockerAli.png",v="/orangewind/images/docker/dockerSetting1.png",w="/orangewind/images/docker/dockerSetting2.png",f="/orangewind/images/docker/dockerSetting3.png",x="/orangewind/images/docker/dockerWSLls.png",D={},S=e("h2",{id:"docker安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker安装","aria-hidden":"true"},"#"),a(" docker安装")],-1),L=e("h3",{id:"一、下载-安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#一、下载-安装","aria-hidden":"true"},"#"),a(" 一、下载 & 安装")],-1),W=e("p",null,"打开地址进行下载：",-1),y={href:"https://www.docker.com/products/docker-desktop/",target:"_blank",rel:"noopener noreferrer"},q=e("p",null,[e("img",{src:c,alt:""})],-1),A=e("p",null,[a("安装完成后，通过桌面的快捷方式打开docker，提示："),e("code",null,"Docker Desktop - WSL kernel version too low")],-1),I=e("p",null,[e("img",{src:l,alt:""})],-1),V={id:"安装wsl",tabindex:"-1"},j=e("a",{class:"header-anchor",href:"#安装wsl","aria-hidden":"true"},"#",-1),E={href:"https://so.csdn.net/so/search?q=WSL&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"},N=e("h4",{id:"手动安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#手动安装","aria-hidden":"true"},"#"),a(" 手动安装")],-1),C={href:"https://so.csdn.net/so/search?q=Linux&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"},P=n(`<ul><li><p>以管理员身份打开 PowerShell（“开始”菜单 &gt;“PowerShell” &gt;单击右键 &gt;“以管理员身份运行”），然后输入以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><img src="`+p+`" alt=""></p><p>2、检查运行 WSL 2 的要求（直接跳过此步骤亦可）</p><ul><li>对于 x64 系统：版本 1903 或更高版本，内部版本为 18362.1049 或更高版本。</li><li>对于 ARM64 系统：版本 2004 或更高版本，内部版本为 19041 或更高版本。</li><li>或 Windows 11。</li></ul><p>3、启用虚拟机功能</p><ul><li><p>安装 WSL 2 之前，必须启用“虚拟机平台”可选功能。 计算机需要虚拟化功能才能使用此功能。 以管理员身份打开 PowerShell 并运行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><img src="`+h+`" alt=""></p><p>重新启动计算机，以完成 WSL 安装并更新到 WSL 2。</p><p>4、执行命令，更新wsl</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--update</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+g+'" alt=""></p><h4 id="检查正常运转" tabindex="-1"><a class="header-anchor" href="#检查正常运转" aria-hidden="true">#</a> 检查正常运转</h4><ul><li>查看桌面端：</li></ul><p><img src="'+u+'" alt=""></p><ul><li>查看 Docker 版本：<code>docker version</code></li></ul><p><img src="'+k+'" alt=""></p><ul><li>查看镜像（Image）：<code>docker image ls</code></li></ul><p><img src="'+m+'" alt=""></p><h3 id="二、docker设置" tabindex="-1"><a class="header-anchor" href="#二、docker设置" aria-hidden="true">#</a> 二、docker设置</h3><h3 id="一些设置" tabindex="-1"><a class="header-anchor" href="#一些设置" aria-hidden="true">#</a> 一些设置</h3><p>在<code>General</code>选项卡中，勾选下图第一个选项<code>Start Docker Desktop when you log in</code>，即可开机自启动，推荐打开开机自启动，这样一开机就可以访问我们一些容器的服务。</p><p><img src="'+_+'" alt=""></p><p>在这个页面，还有下列配置建议设定：</p><ul><li>Send usage statistics 发送错误报告，<strong>可以取消勾选</strong></li><li>Open Desktop Dashboard at startup 每次启动Docker就弹出主面板，<strong>建议取消勾选</strong>，需要用的时候再在任务栏打开更好</li></ul><h3 id="国内镜像源配置" tabindex="-1"><a class="header-anchor" href="#国内镜像源配置" aria-hidden="true">#</a> 国内镜像源配置</h3><p>拉取镜像通常速度很慢，因为镜像仓库位于国外，这时我们配置一下阿里云加速即可。</p>',26),B={href:"https://link.juejin.cn/?target=https%3A%2F%2Fcr.console.aliyun.com%2F",target:"_blank",rel:"noopener noreferrer"},F=n('<p><img src="'+b+'" alt=""></p><p>然后进入Docker Engine选项卡，可见右侧JSON内容就是配置文件：</p><p><img src="'+v+`" alt=""></p><p>在里面添加一个镜像源字段：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;你的容器加速地址&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+w+'" alt=""></p><p>最后，点击右下角<code>Apply &amp; restart</code>按钮即可保存配置。</p><h3 id="修改镜像和容器的存放位置" tabindex="-1"><a class="header-anchor" href="#修改镜像和容器的存放位置" aria-hidden="true">#</a> 修改镜像和容器的存放位置</h3><p>Docker Desktop默认情况下只能安装在C盘，并且其<strong>镜像和容器也是以vhdx虚拟磁盘映像的形式存放在C盘的</strong>，随着镜像和容器的数量增加，C盘的空间也会越来越不够用。</p><p>虽然暂时无法改变Docker Desktop的安装位置，但是我们仍然可以修改镜像和容器的位置的。</p><p>在设置页面中，找到左侧Resources选项卡，在Advanced选项中，即可修改镜像和容器存放位置：</p><p><img src="'+f+'" alt=""></p><h3 id="彻底清空所有镜像和容器数据" tabindex="-1"><a class="header-anchor" href="#彻底清空所有镜像和容器数据" aria-hidden="true">#</a> 彻底清空所有镜像和容器数据</h3><p>大家如果使用了很长时间的Docker Desktop会发现，即使删除了所有的镜像和容器，Docker的数据映像仍然会占用很大的空间，这是因为使用过程中产生的数据缓存仍然会存放在Docker Desktop的数据映像中无法删除。</p><p>事实上，Docker Desktop是基于WSL2的，它将容器和镜像存放在一个WSL2发行版中运行的。我们可以通过WSL2的命令完全移除发行版以达到清空数据的目的。</p><p>执行wsl -l命令，可以看到Docker Desktop有两个对应的发行版：</p><p><img src="'+x+`" alt=""></p><p>先退出Docker Desktop，然后在命令行终端中执行下列命令移除发行版即可：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--unregister</span> docker-desktop-data
wsl <span class="token parameter variable">--unregister</span> docker-desktop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>显示注销成功，则说明清除完成！这样所有的Docker数据就被彻底删除了！</p><h3 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h3><p>到此，我们就可以正常使用Docker了！打开命令行或者<code>cmd</code>，即可在里面使用<code>docker</code>命令。</p>`,22);function M(z,O){const r=t("ExternalLinkIcon");return i(),d("div",null,[S,L,W,e("ul",null,[e("li",null,[e("a",y,[a("https://www.docker.com/products/docker-desktop/"),s(r)])])]),q,A,I,e("h3",V,[j,a(" 安装"),e("a",E,[a("WSL"),s(r)])]),N,e("p",null,[a("1、启用适用于 "),e("a",C,[a("Linux"),s(r)]),a(" 的 Windows 子系统")]),P,e("p",null,[a("首先进入这个链接："),e("a",B,[a("cr.console.aliyun.com/"),s(r)]),a(" ，登录自己的阿里云账户，在左侧容器工具-镜像加速器中，复制自己的加速器地址：")]),F])}const G=o(D,[["render",M],["__file","dockeranzhuang.html.vue"]]);export{G as default};
